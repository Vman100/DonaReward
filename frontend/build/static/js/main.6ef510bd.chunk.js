(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{142:function(e,t,n){e.exports=n(253)},253:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n(26),c=n(28),s=n(98),u=n(99),l=n(8),p=function(e){return{type:"SET_BALANCE",balance:e}},d=function(e){return{type:"SET_CONTRIBUTORINFO",contributorInfo:e}},m=function(e){return{type:"SET_CHARITYADDRESS",charityAddress:e}},b=function(e){return{type:"SET_GOAL",goal:e}},y=function(e){return{type:"SET_CURRENTMILESTONE",currentMilestone:e}},f=function(e){return{type:"SET_PREVMILESTONE",prevMilestone:e}},v=function(e){return{type:"SET_MILESTONEARRAY",milestoneArray:e}},E=function(e){return{type:"SET_ISWITHDRAWENABLED",isWithdrawEnabled:e}};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=Object(i.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoading:!0,isWithdrawEnabled:!1,walletAddress:void 0,contract:void 0,provider:void 0,balance:0,contributorInfo:void 0,charityAddress:void 0,goal:0,currentMilestone:0,prevMilestone:0,milestoneArray:[],donationBracket:[10,50,100,500,1e3,5e3,1e4,5e4]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LOADING":return h({},e,{isLoading:t.isLoading});case"SET_WALLETADDRESS":return h({},e,{walletAddress:t.walletAddress});case"SET_CONTRACT":return h({},e,{contract:t.contract});case"SET_PROVIDER":return h({},e,{provider:t.provider});case"SET_BALANCE":return h({},e,{balance:t.balance});case"SET_CONTRIBUTORINFO":return h({},e,{contributorInfo:t.contributorInfo});case"SET_CHARITYADDRESS":return h({},e,{charityAddress:t.charityAddress});case"SET_GOAL":return h({},e,{goal:t.goal});case"SET_CURRENTMILESTONE":return h({},e,{currentMilestone:t.currentMilestone});case"SET_PREVMILESTONE":return h({},e,{prevMilestone:t.prevMilestone});case"SET_MILESTONEARRAY":return h({},e,{milestoneArray:t.milestoneArray});case"SET_ISWITHDRAWENABLED":return h({},e,{isWithdrawEnabled:t.isWithdrawEnabled});default:return e}}}),O=n(9),A=n.n(O),j=n(13),S=n(100),x=n(29),T=n(101),D=n(102),C=n(122),N=function(){var e=Object(j.a)(A.a.mark(function e(t,n){var a,r,o;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.addContributor(t);case 3:return a=e.sent,e.next=6,a.wait(2);case 6:return r=e.sent,o=r.events.pop().args,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(j.a)(A.a.mark(function e(t,n){var a,r,o;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.donate({value:t});case 3:return a=e.sent,e.next=6,a.wait(2);case 6:return r=e.sent,o=r.events.pop().args,e.abrupt("return",o);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(j.a)(A.a.mark(function e(t){var n,a,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.withdraw();case 3:return n=e.sent,e.next=6,n.wait(2);case 6:return a=e.sent,r=a.events.pop().args,e.abrupt("return",r);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",e.t0);case 14:case"end":return e.stop()}},e,null,[[0,11]])}));return function(t){return e.apply(this,arguments)}}(),_=n(123),I=n(254),R=n(277),W=n(278),P=n(279),L=n(40),B=n(280),U=n(281),V=n(282),Y=n(283),G=n(288),H=n(289),z=n(290),F=n(284),J=n(286),$=n(105),q=n(4),K=n(274),Q=n(275),X=n(276),Z=n(37),ee=(n(152),n(287));function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var ae=Object($.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(4),display:"flex",flexDirection:"column",alignItems:"center"},form:{width:"100%",marginTop:e.spacing(1)},button:{margin:e.spacing(1,2,1)},formControl:{margin:e.spacing(3)},group:{margin:e.spacing(1,0)},title:{margin:e.spacing(1,0,1)},submit:{margin:e.spacing(1,0,1)},gridUser:{color:e.palette.getContrastText(K.a[400]),backgroundColor:K.a[400]},gridCampaign:{color:e.palette.getContrastText(Q.a[500]),backgroundColor:Q.a[500]}}}),re=Object(q.a)(function(e){return{root:{color:e.palette.getContrastText(X.a[500]),backgroundColor:X.a[500],"&:hover":{backgroundColor:X.a[700]}}}})(I.a),oe=Object(q.a)(function(e){return{root:{color:e.palette.getContrastText(Q.a[600]),backgroundColor:Q.a[600],"&:hover":{backgroundColor:Q.a[800]}}}})(I.a);var ie=Object(c.b)(function(e){var t=e.user;return{contract:t.contract,walletAddress:t.walletAddress,charityAddress:t.charityAddress,donationBracket:t.donationBracket,contributorInfo:t.contributorInfo,provider:t.provider,balance:t.balance,goal:t.goal,currentMilestone:t.currentMilestone,prevMilestone:t.prevMilestone,milestoneArray:t.milestoneArray,isWithdrawEnabled:t.isWithdrawEnabled}})(function(e){var t=ae(),n=e.walletAddress,a=e.charityAddress,o=e.donationBracket,i=e.contract,c=e.contributorInfo,s=e.provider,u=e.balance,m=e.goal,b=e.currentMilestone,v=e.prevMilestone,g=e.milestoneArray,h=e.isWithdrawEnabled,w=e.dispatch,O=r.a.useState({showDonateOptions:!1,donationAmount:10}),S=Object(_.a)(O,2),x=S[0],T=S[1];function D(){for(var e=0;e<g.length;e+=1)if(g[e]===b)return e;return-1}function C(){var e=D(),t=0;return-1!==e&&(t=g[e]-g[e-1]),t}var N=function(){var e=Object(j.a)(A.a.mark(function e(t){var a,r;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),"Donate"===t.currentTarget.name&&T(ne({},x,{showDonateOptions:!0})),"Withdraw"!==t.currentTarget.name){e.next=13;break}return e.next=5,k(i);case 5:return e.next=7,i.contributorsDB(n);case 7:return a=e.sent,w(d(a)),e.next=11,i.isWithdrawEnabled();case 11:(r=e.sent)!==h&&w(E(r));case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function $(){return($=Object(j.a)(A.a.mark(function e(t){var a,r,o,c;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=x.donationAmount,!x.showDonateOptions){e.next=21;break}return T(ne({},x,{showDonateOptions:!1})),e.next=6,M(Z.ethers.utils.parseUnits(a.toString(),"wei"),i);case 6:return e.next=8,i.contributorsDB(n);case 8:return r=e.sent,e.t0=Number,e.next=12,s.getBalance(i.address);case 12:return e.t1=e.sent,(o=(0,e.t0)(e.t1))>=b&&(w(f(b)),w(y(b<m?g[D()+1]:m))),e.next=17,i.isWithdrawEnabled();case 17:(c=e.sent)!==h&&w(E(c)),w(d(r)),w(p(o));case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}return r.a.createElement(R.a,{component:"main",maxWidth:"md"},r.a.createElement(W.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(P.a,{className:t.group,container:!0,spacing:8,justify:"space-evenly"},r.a.createElement(P.a,{className:t.gridUser,item:!0,xs:10,sm:5},r.a.createElement(L.a,{variant:"h5",className:t.title},"User details"),r.a.createElement(B.a,null,r.a.createElement(U.a,null,r.a.createElement(V.a,{primary:r.a.createElement(L.a,{variant:"h6"},"contributer address"),secondary:r.a.createElement(L.a,{variant:"subtitle2"},n)})),r.a.createElement(U.a,null,r.a.createElement(V.a,{primary:r.a.createElement(L.a,{variant:"h6"},"donation amount"),secondary:r.a.createElement(L.a,{variant:"subtitle2"},"".concat(String(c.donationAmount)," WEI"))})),r.a.createElement(U.a,null,r.a.createElement(V.a,{primary:r.a.createElement(L.a,{variant:"h6"},"token amount"),secondary:r.a.createElement(L.a,{variant:"subtitle2"},"".concat(String(c.tokenAmount)," DOR"))}))),r.a.createElement(ee.a,{value:c.donationAmount-v,total:C(),progress:"percent",size:"medium",label:"user donation percentage to current milestone"})),r.a.createElement(P.a,{className:t.gridCampaign,item:!0,xs:10,sm:5},r.a.createElement(L.a,{variant:"h5",className:t.title},"Campaign details"),r.a.createElement(B.a,null,r.a.createElement(U.a,null,r.a.createElement(V.a,{primary:r.a.createElement(L.a,{variant:"h6"},"charity address"),secondary:r.a.createElement(L.a,{variant:"subtitle2"},a)})),r.a.createElement(U.a,null,r.a.createElement(V.a,{primary:r.a.createElement(L.a,{variant:"h6"},"charity goal"),secondary:r.a.createElement(L.a,{variant:"subtitle2"},"".concat(String(m)," WEI"))})),r.a.createElement(ee.a,{value:u,total:m,progress:"value",size:"medium",label:"overall donation amount to goal"}),r.a.createElement(U.a,null,r.a.createElement(V.a,{primary:r.a.createElement(L.a,{variant:"h6"},"current milestone"),secondary:r.a.createElement(L.a,{variant:"subtitle2"},"".concat(String(b)," WEI"))}))),r.a.createElement(ee.a,{value:u-v,total:C(),progress:"percent",size:"medium",label:"overall donation percentage to current milestone"}))),r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(e){return $.apply(this,arguments)}},r.a.createElement(Y.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.group,"aria-label":"full-width contained primary button group"},r.a.createElement(I.a,{type:"button",name:"Donate",className:t.button,onClick:N},"Donate"),r.a.createElement(oe,{disabled:!h,type:"button",name:"Withdraw",className:t.button,onClick:N},"Withdraw")),x.showDonateOptions&&r.a.createElement("div",null,r.a.createElement(G.a,{component:"fieldset",className:t.formControl},r.a.createElement(H.a,{component:"legend"},"Donation Bracket"),r.a.createElement(z.a,{"aria-label":"donationAmount",name:"donationAmount",className:t.group,value:Number(x.donationAmount),onChange:function(e,t){T(ne({},x,Object(l.a)({},e.target.name,t)))}},r.a.createElement(P.a,{container:!0,direction:"row"},o.map(function(e,t){return r.a.createElement(F.a,{key:t,value:e,control:r.a.createElement(J.a,null),label:"".concat(e," WEI")})})," "))),r.a.createElement(re,{type:"submit",fullWidth:!0,variant:"contained",className:t.submit},"Submit donation Options")))))}),ce=n(70),se=n.n(ce),ue=function(){var e=Object(j.a)(A.a.mark(function e(){var t,n,a;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=14;break}return e.prev=1,window.ethereum.autoRefreshOnNetworkChange=!1,e.next=5,window.ethereum.enable();case 5:return t=new Z.ethers.providers.Web3Provider(window.ethereum),n=t.getSigner(),a=new Z.ethers.Contract(se.a.address,se.a.abi,n),e.abrupt("return",{account:window.ethereum.selectedAddress,web3:window.web3,provider:t,signer:n,contract:a,hasErrored:!1});case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",{hasErrored:!0,message:"You denied access to your metamask."});case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(){return e.apply(this,arguments)}}(),le=n(285),pe=Object($.a)(function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},progress:{margin:e.spacing(2)}}});function de(){var e=pe();return r.a.createElement(R.a,{component:"main",maxWidth:"xs"},r.a.createElement(W.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(le.a,{className:e.progress})))}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach(function(t){Object(l.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}window.ethereum.on("accountsChanged",function(){window.location.reload()});var ye=function(e){function t(){var e,n;Object(S.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(T.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(C.a)(t,e),Object(x.a)(t,[{key:"componentDidMount",value:function(){var e=Object(j.a)(A.a.mark(function e(){var t,n,a,r,o,i,c,s,u,l,g,h;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.dispatch,e.next=3,ue();case 3:return n=e.sent,this.setState(be({},n)),e.t0=Number,e.next=8,n.provider.getBalance(n.contract.address);case 8:return e.t1=e.sent,a=(0,e.t0)(e.t1),e.next=12,n.contract.contributorsDB(n.account);case 12:return r=e.sent,e.next=15,n.contract.charityAddress();case 15:return o=e.sent,e.t2=Number,e.next=19,n.contract.goal();case 19:return e.t3=e.sent,i=(0,e.t2)(e.t3),e.t4=Number,e.next=24,n.contract.currentMilestone();case 24:return e.t5=e.sent,c=(0,e.t4)(e.t5),e.t6=Number,e.next=29,n.contract.prevMilestone();case 29:return e.t7=e.sent,s=(0,e.t6)(e.t7),e.t8=Number,e.next=34,n.contract.milestoneMultipler();case 34:return e.t9=e.sent,u=(0,e.t8)(e.t9),e.next=38,n.contract.isWithdrawEnabled();case 38:for(l=e.sent,(g=[]).push(s),h=c;h<i;h+=h*u)g.push(h);g.push(i),r.isContributor||N(n.account,n.contract),t({type:"SET_WALLETADDRESS",walletAddress:n.account}),t({type:"SET_CONTRACT",contract:n.contract}),t({type:"SET_PROVIDER",provider:n.provider}),t(p(a)),t(d(r)),t(m(o)),t(b(i)),t(y(c)),t(f(s)),t(v(g)),t(E(l)),t({type:"SET_LOADING",isLoading:!1});case 56:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.isLoading,t=this.state,n=t.hasErrored,a=t.message;return r.a.createElement("div",null,e&&r.a.createElement(de,null),!e&&n&&r.a.createElement("h3",null,a),!e&&!n&&r.a.createElement(ie,null))}}]),t}(r.a.Component),fe=Object(c.b)(function(e){var t=e.user;return{isLoading:t.isLoading,walletAddress:t.walletAddress}})(ye);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=Object(i.d)(w,Object(i.a)(s.a,Object(u.createLogger)()));Object(o.render)(r.a.createElement(c.a,{store:ve},r.a.createElement(fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},70:function(e,t){e.exports={address:"0x535ee2Affb7C1fC3019DEAC733E26D5AAF8B95D1",abi:[{constant:!0,inputs:[],name:"milestoneMultipler",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"donaRewardsContractAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"prevMilestone",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"contributorsDB",outputs:[{name:"isContributor",type:"bool"},{name:"donationAmount",type:"uint256"},{name:"tokenAmount",type:"uint256"},{name:"prevPercentageAmount",type:"uint256"},{name:"currentPercentageAmount",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"withdraw",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"goal",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"isWithdrawEnabled",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"donationBracket",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"charityAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"currentMilestone",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"_contributor",type:"address"}],name:"removeContributor",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"_contributor",type:"address"}],name:"addContributor",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"donate",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{inputs:[{name:"_rewardsContract",type:"address"},{name:"_charityAddress",type:"address"},{name:"_goal",type:"uint256"},{name:"_milestone",type:"uint256"},{name:"_milestoneMultipler",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_contributor",type:"address"},{indexed:!1,name:"_donationAmount",type:"uint256"}],name:"logDonations",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_contributor",type:"address"}],name:"logContributorAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_contributor",type:"address"}],name:"logContributorRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"_contributor",type:"address"},{indexed:!1,name:"_tokenAmount",type:"uint256"}],name:"logWithdrawel",type:"event"}]}}},[[142,1,2]]]);
//# sourceMappingURL=main.6ef510bd.chunk.js.map